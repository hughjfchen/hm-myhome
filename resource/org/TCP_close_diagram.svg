<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1079" height="2408"><desc>title%20TCP%20close()%20sequence%20diagram%0A%0Aparticipantgroup%20%23lightgreen%20**TCP%20close%20Initiator**%0Aparticipant%20%22Application%201%22%20as%20A1%0Aparticipant%20%22Kernel%201%22%20as%20K1%0Aend%0A%0Aparticipantgroup%20%23pink%20**Passive%20close**%0Aparticipant%20%22Kernel%202%22%20as%20K2%0Aparticipant%20%22Application%202%22%20as%20A2%0Aend%0Aactivate%20K1%0Aactivate%20K2%0A%0Aactivate%20A1%20%23lightgrey%0Anote%20over%20A1%3A**Initiator**%5CnThe%20app%20that%20closes%5Cnthe%20connection%0Anote%20over%20K1%3AKernel%20where%5Cn**Application%201**%20runs%0A%0Abox%20over%20K1%3AESTABILISHED%0Adeactivate%20A1%0Aactivate%20A1%0AA1-%3E(1)K1%3Aclose()%0A%0Abox%20over%20K2%3AESTABILISHED%0A%0AK1-%3E(1)K2%3AFIN%0Adeactivate%20K1%0Aactivate%20K1%20%23lightgrey%0Adeactivate%20K2%0Aactivate%20K2%20%23red%0Abox%20over%20K1%3AFIN-WAIT-1%0Anote%20over%20K1%3AIf%20connections%20stays%5Cnin%20this%20state%20for%20long%20time%2C%5Cncheck%20network%20connectivity.%0AK2-%3E(1)K1%3AACK%0Adeactivate%20K1%0Aactivate%20K1%20%23yellow%0AK1-%3E(1)A1%3A%0Adeactivate%20A1%0Anote%20over%20A1%3AThe%20connection%20is%20half%20closed.%5CnRemote%20endpoint%20can%20still%20send%20data%5Cnand%20this%20endpoint%20can%20read(2)%2C%20recv(2)%20it.%5Cnlsof%20is%20not%20associating%20the%20connection%20with%5Cnthe%20process.%0A%0Abox%20over%20K1%3AFIN-WAIT-2%0Anote%20over%20K1%3AIf%20connections%20stays%5Cnin%20this%20state%20for%20long%20time%2C%5Cncheck%20Application%202.%0AK2-%3E(1)A2%3Aread(2)%2C%20recv(2)%20returns%200%0A%0Aactivate%20A2%0Abox%20over%20K2%3ACLOSE-WAIT%0Anote%20over%20K2%3AIf%20connections%20stays%5Cnin%20this%20state%20for%20long%20time%2C%5Cncheck%20Application%202.%0Anote%20over%20A2%3AThe%20application%20could%5Cndo%20some%20work%2C%5Cnmight%20send(2)%20somedata%5Cnthen%20it%20must%20run%20close().%5Cnlsof%20is%20still%20associating%20the%5Cnconnection%20with%20the%20process.%0A%0A%0A%0AA2-%3E(1)K2%3Aclose()%0Adeactivate%20K2%0Adeactivate%20A2%0Aactivate%20K2%0A%0AK2-%3E(1)K1%3AFIN%0Abox%20over%20K2%3ALAST-ACK%0Anote%20over%20K2%3AIf%20connections%20stays%5Cnin%20this%20state%20for%20long%20time%2C%5Cncheck%20network%20connectivity.%0A%0Adeactivate%20K1%0A%0Aactivate%20K1%0Anote%20over%20A1%3AThe%20applicaiton%20can't%5Cnread(2)%20or%20recv(2)%20anymore.%0A%0AK1-%3E(1)K2%3AACK%0A%0Adeactivate%20K2%0Abox%20over%20K1%3ATIME-WAIT%0Anote%20over%20K1%3AIf%20you%20see%20a%20lot%20of%20connections%20in%20this%20state%5Cncheck%20both%20applications%20why%5Cnthe%20connetions%20are%20not%20persistent.%5CnE.g.%3A%20HTTP%2F1.1%20Connection%3A%20Keep-Alive%0AK1-%3EK1%3AWait%20for%20240%20seconds%0Adeactivate%20K1%0A%0Anote%20over%20K2%2CA2%3A%20--Author%3A%20Mircea%20Vutcovici%5CnGenerated%20using%3A%20https%3A%2F%2Fsequencediagram.org--%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1079" height="2408"/></g><g><g><path fill="lightgreen" stroke="black" paint-order="fill stroke markers" d=" M 115.278688531 54.286564085727264 L 446.197374699 54.286564085727264 L 446.197374699 2399.4838435436786 L 115.278688531 2399.4838435436786 L 115.278688531 54.286564085727264 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="bold" text-decoration="normal" x="210.503656615" y="78.91502444572725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TCP close Initiator</text></g><g><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 570.4731532799999 54.286564085727264 L 1000.9513323729609 54.286564085727264 L 1000.9513323729609 2399.4838435436786 L 570.4731532799999 2399.4838435436786 L 570.4731532799999 54.286564085727264 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="bold" text-decoration="normal" x="733.2278678264804" y="78.91502444572725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Passive close</text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 188.97021776 143.56473289072727 L 188.97021776 2399.4838435436786" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 388.51756422 143.56473289072727 L 388.51756422 2399.4838435436786" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 628.1529637589999 143.56473289072727 L 628.1529637589999 2399.4838435436786" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 927.2598031439609 143.56473289072727 L 927.2598031439609 2399.4838435436786" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 124.074567231 96.24290548472726 L 253.865868289 96.24290548472726 L 253.865868289 143.56473289072727 L 124.074567231 143.56473289072727 L 124.074567231 96.24290548472726 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="143.16162401" y="125.97297549072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Application 1</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 339.633632441 96.24290548472726 L 437.40149599899996 96.24290548472726 L 437.40149599899996 143.56473289072727 L 339.633632441 143.56473289072727 L 339.633632441 96.24290548472726 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="358.72068922" y="125.97297549072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kernel 1</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 579.2690319799999 96.24290548472726 L 677.036895538 96.24290548472726 L 677.036895538 143.56473289072727 L 579.2690319799999 143.56473289072727 L 579.2690319799999 96.24290548472726 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="598.3560887589999" y="125.97297549072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kernel 2</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 862.3641526149609 96.24290548472726 L 992.1554536729609 96.24290548472726 L 992.1554536729609 143.56473289072727 L 862.3641526149609 143.56473289072727 L 862.3641526149609 96.24290548472726 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="881.4512093939609" y="125.97297549072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Application 2</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 379.72168552 152.36061159072725 L 397.31344292 152.36061159072725 L 397.31344292 574.3861443600289 L 379.72168552 574.3861443600289 L 379.72168552 152.36061159072725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 619.3570850589999 152.36061159072725 L 636.9488424589999 152.36061159072725 L 636.9488424589999 591.9779017600289 L 619.3570850589999 591.9779017600289 L 619.3570850589999 152.36061159072725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="lightgrey" stroke="black" paint-order="fill stroke markers" d=" M 180.17433906 152.36061159072725 L 197.76609646 152.36061159072725 L 197.76609646 405.6819181507272 L 180.17433906 405.6819181507272 L 180.17433906 152.36061159072725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 180.17433906 405.6819181507272 L 197.76609646 405.6819181507272 L 197.76609646 878.2675869128552 L 180.17433906 878.2675869128552 L 180.17433906 405.6819181507272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="lightgrey" stroke="black" paint-order="fill stroke markers" d=" M 379.72168552 574.3861443600289 L 397.31344292 574.3861443600289 L 397.31344292 820.2147874928552 L 379.72168552 820.2147874928552 L 379.72168552 574.3861443600289" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="red" stroke="black" paint-order="fill stroke markers" d=" M 619.3570850589999 591.9779017600289 L 636.9488424589999 591.9779017600289 L 636.9488424589999 1631.2145404775943 L 619.3570850589999 1631.2145404775943 L 619.3570850589999 591.9779017600289" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="yellow" stroke="black" paint-order="fill stroke markers" d=" M 379.72168552 820.2147874928552 L 397.31344292 820.2147874928552 L 397.31344292 1859.1691815348522 L 379.72168552 1859.1691815348522 L 379.72168552 820.2147874928552" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 918.4639244439609 1247.9734110342997 L 936.0556818439609 1247.9734110342997 L 936.0556818439609 1613.6227830775942 L 918.4639244439609 1613.6227830775942 L 918.4639244439609 1247.9734110342997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 619.3570850589999 1631.2145404775943 L 636.9488424589999 1631.2145404775943 L 636.9488424589999 2002.9656317476786 L 619.3570850589999 2002.9656317476786 L 619.3570850589999 1631.2145404775943" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 379.72168552 1859.1691815348522 L 397.31344292 1859.1691815348522 L 397.31344292 2261.5644655276787 L 379.72168552 2261.5644655276787 L 379.72168552 1859.1691815348522" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="17.454545454545453pt" font-style="normal" font-weight="normal" text-decoration="normal" x="379.1568298339844" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TCP close() sequence diagram</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 94.52144489999999 178.74824769072723 L 267.58640895999997 178.74824769072723 L 283.41899062 194.5808293507272 L 283.41899062 254.39280451072722 L 94.52144489999999 254.39280451072722 L 94.52144489999999 178.74824769072723 M 267.58640895999997 178.74824769072723 L 267.58640895999997 194.5808293507272 L 283.41899062 194.5808293507272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="bold" text-decoration="normal" x="119.14990526" y="203.37670805072725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Initiator</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="119.14990526" y="220.96846545072725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The app that closes</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="119.14990526" y="238.56022285072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">the connection</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 295.87738511 280.7804406107272 L 465.32516167 280.7804406107272 L 481.15774333 296.61302227072724 L 481.15774333 338.8332400307272 L 295.87738511 338.8332400307272 L 295.87738511 280.7804406107272 M 465.32516167 280.7804406107272 L 465.32516167 296.61302227072724 L 481.15774333 296.61302227072724" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="320.50584547" y="305.4089009707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kernel where</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="bold" text-decoration="normal" x="320.50584547" y="323.0006583707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Application 1</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="420.95897047" y="323.0006583707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> runs</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 307.13129136 365.2208761307272 L 469.90383708 365.2208761307272 L 469.90383708 405.6819181507272 L 307.13129136 405.6819181507272 L 307.13129136 365.2208761307272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="331.75975172" y="389.8493364907272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ESTABILISHED</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="264.73998474" y="447.9021359107272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">close()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 197.76609646 448.46369622277064 L 365.30502718334185 464.6616280344094" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(379.72168552,466.05545362277064) rotate(5.5222840844359435,0,0) translate(-379.72168552,-466.05545362277064)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 365.06188768666664 458.725554706104 L 379.72168552 466.05545362277064 L 365.06188768666664 473.3853525394373 Z"/><g transform="rotate(-5.5222840844359435,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 546.766690899 492.4430897227707 L 709.539236619 492.4430897227707 L 709.539236619 532.9041317427707 L 546.766690899 532.9041317427707 L 546.766690899 492.4430897227707" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="571.3951512589999" y="517.0715500827707" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ESTABILISHED</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="495.44854523949994" y="575.1243495027707" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FIN</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 397.31344292 574.3861443600289 L 604.9184484937451 590.8339780286584" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(619.3570850589999,591.9779017600289) rotate(4.529886413033775,0,0) translate(-619.3570850589999,-591.9779017600289)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 604.6972872256666 584.6480028433622 L 619.3570850589999 591.9779017600289 L 604.6972872256666 599.3078006766956 Z"/><g transform="rotate(-4.529886413033775,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 321.96722886 618.3655378600289 L 455.06789958 618.3655378600289 L 455.06789958 658.8265798800289 L 321.96722886 658.8265798800289 L 321.96722886 618.3655378600289" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="346.59568922" y="642.993998220029" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FIN-WAIT-1</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 267.10785386 685.2142159800289 L 494.09469291999994 685.2142159800289 L 509.92727457999996 701.0467976400289 L 509.92727457999996 760.8587728000289 L 267.10785386 760.8587728000289 L 267.10785386 685.2142159800289 M 494.09469291999994 685.2142159800289 L 494.09469291999994 701.0467976400289 L 509.92727457999996 701.0467976400289" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="291.73631422" y="709.8426763400289" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If connections stays</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="291.73631422" y="727.4344337400289" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">in this state for long time,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="291.73631422" y="745.0261911400289" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check network connectivity.</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="491.88604523949994" y="803.0789905600288" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ACK</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 619.3570850589999 802.6230300928552 L 411.7520794852548 819.0708637614847" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(397.31344292,820.2147874928552) rotate(-4.529886413033775,0,0) translate(-397.31344292,-820.2147874928552)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 411.97324075333336 812.8848885761885 L 397.31344292 820.2147874928552 L 411.97324075333336 827.5446864095219 Z"/><g transform="rotate(4.529886413033775,0,0)"/></g></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="288.74389099" y="862.4350052528551" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 379.72168552 860.6758295128552 L 212.18275479665814 876.8737613244939" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(197.76609646,878.2675869128552) rotate(-5.5222840844359435,0,0) translate(-197.76609646,-878.2675869128552)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 212.42589429333333 870.9376879961885 L 197.76609646 878.2675869128552 L 212.42589429333333 885.5974858295219 Z"/><g transform="rotate(5.5222840844359435,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 17.591757400000002 904.6552230128552 L 344.51609645999997 904.6552230128552 L 360.34867812 920.4878046728552 L 360.34867812 1015.4832946328552 L 17.591757400000002 1015.4832946328552 L 17.591757400000002 904.6552230128552 M 344.51609645999997 904.6552230128552 L 344.51609645999997 920.4878046728552 L 360.34867812 920.4878046728552" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.22021776" y="929.2836833728552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The connection is half closed.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.22021776" y="946.8754407728552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Remote endpoint can still send data</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.22021776" y="964.4671981728552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">and this endpoint can read(2), recv(2) it.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.22021776" y="982.0589555728552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">lsof is not associating the connection with</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.22021776" y="999.6507129728552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">the process.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 321.96722886 1041.8709307328552 L 455.06789958 1041.8709307328552 L 455.06789958 1082.331972752855 L 321.96722886 1082.331972752855 L 321.96722886 1041.8709307328552" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="346.59568922" y="1066.499391092855" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FIN-WAIT-2</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 274.95941636 1108.7196088528551 L 486.24313042 1108.7196088528551 L 502.07571208 1124.552190512855 L 502.07571208 1184.364165672855 L 274.95941636 1184.364165672855 L 274.95941636 1108.7196088528551 M 486.24313042 1108.7196088528551 L 486.24313042 1124.552190512855 L 502.07571208 1124.552190512855" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.58787672" y="1133.3480692128549" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If connections stays</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.58787672" y="1150.9398266128549" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">in this state for long time,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.58787672" y="1168.5315840128549" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check Application 2.</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="688.7884147014804" y="1226.584383432855" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">read(2), recv(2) returns 0</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 636.9488424589999 1230.3816536342997 L 904.0082410219707 1247.070081542971" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(918.4639244439609,1247.9734110342997) rotate(3.5757393032271603,0,0) translate(-918.4639244439609,-1247.9734110342997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 903.8041266106276 1240.643512117633 L 918.4639244439609 1247.9734110342997 L 903.8041266106276 1255.3033099509664 Z"/><g transform="rotate(-3.5757393032271603,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 554.040128399 1274.3610471342997 L 702.265799119 1274.3610471342997 L 702.265799119 1314.8220891542996 L 554.040128399 1314.8220891542996 L 554.040128399 1274.3610471342997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="578.6685887589999" y="1298.9895074942995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">CLOSE-WAIT</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 514.5948158989999 1341.2097252542997 L 725.8785299589999 1341.2097252542997 L 741.7111116189999 1357.0423069142996 L 741.7111116189999 1416.8542820742996 L 514.5948158989999 1416.8542820742996 L 514.5948158989999 1341.2097252542997 M 725.8785299589999 1341.2097252542997 L 725.8785299589999 1357.0423069142996 L 741.7111116189999 1357.0423069142996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="539.2232762589999" y="1365.8381856142994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If connections stays</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="539.2232762589999" y="1383.4299430142994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">in this state for long time,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="539.2232762589999" y="1401.0217004142994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check Application 2.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 801.6860302839609 1443.2419181742996 L 1037.0009943439609 1443.2419181742996 L 1052.8335760039608 1459.0744998342996 L 1052.8335760039608 1571.6617471942996 L 801.6860302839609 1571.6617471942996 L 801.6860302839609 1443.2419181742996 M 1037.0009943439609 1443.2419181742996 L 1037.0009943439609 1459.0744998342996 L 1052.8335760039608 1459.0744998342996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1467.8703785342993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The application could</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1485.4621359342993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">do some work,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1503.0538933342993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">might send(2) somedata</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1520.6456507342994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">then it must run close().</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1538.2374081342994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">lsof is still associating the</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="826.3144906439609" y="1555.8291655342994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection with the process.</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="753.7024772014804" y="1613.8819649542995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">close()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 918.4639244439609 1613.6227830775942 L 651.4045258809901 1630.3112109862655" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(636.9488424589999,1631.2145404775943) rotate(-3.5757393032271603,0,0) translate(-636.9488424589999,-1631.2145404775943)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 651.6086402923332 1623.8846415609275 L 636.9488424589999 1631.2145404775943 L 651.6086402923332 1638.544439394261 Z"/><g transform="rotate(3.5757393032271603,0,0)"/></g></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="495.44854523949994" y="1673.4347582375942" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FIN</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 619.3570850589999 1672.6965530948523 L 411.7520794852548 1689.1443867634819" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(397.31344292,1690.2883104948523) rotate(-4.529886413033775,0,0) translate(-397.31344292,-1690.2883104948523)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 411.97324075333336 1682.9584115781856 L 397.31344292 1690.2883104948523 L 411.97324075333336 1697.618209411519 Z"/><g transform="rotate(4.529886413033775,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 564.844815899 1716.6759465948523 L 691.461111619 1716.6759465948523 L 691.461111619 1757.1369886148523 L 564.844815899 1757.1369886148523 L 564.844815899 1716.6759465948523" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="589.4732762589999" y="1741.304406954852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">LAST-ACK</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 506.74325339899997 1783.5246247148523 L 733.7300924589999 1783.5246247148523 L 749.5626741189999 1799.3572063748522 L 749.5626741189999 1859.1691815348522 L 506.74325339899997 1859.1691815348522 L 506.74325339899997 1783.5246247148523 M 733.7300924589999 1783.5246247148523 L 733.7300924589999 1799.3572063748522 L 749.5626741189999 1799.3572063748522" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="531.3717137589999" y="1808.153085074852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If connections stays</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="531.3717137589999" y="1825.744842474852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">in this state for long time,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="531.3717137589999" y="1843.336599874852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check network connectivity.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 66.53316365 1885.5568176348522 L 295.57469020999997 1885.5568176348522 L 311.40727187 1901.3893992948522 L 311.40727187 1943.6096170548522 L 66.53316365 1943.6096170548522 L 66.53316365 1885.5568176348522 M 295.57469020999997 1885.5568176348522 L 295.57469020999997 1901.3893992948522 L 311.40727187 1901.3893992948522" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="91.16162401" y="1910.185277994852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The applicaiton can't</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="91.16162401" y="1927.777035394852" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">read(2) or recv(2) anymore.</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="491.88604523949994" y="1985.8298348148521" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ACK</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 397.31344292 1985.3738743476786 L 604.9184484937451 2001.821708016308" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(619.3570850589999,2002.9656317476786) rotate(4.529886413033775,0,0) translate(-619.3570850589999,-2002.9656317476786)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 604.6972872256666 1995.6357328310119 L 619.3570850589999 2002.9656317476786 L 604.6972872256666 2010.2955306643453 Z"/><g transform="rotate(-4.529886413033775,0,0)"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 322.41644761 2029.3532678476788 L 454.61868083 2029.3532678476788 L 454.61868083 2069.8143098676787 L 322.41644761 2069.8143098676787 L 322.41644761 2029.3532678476788" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="347.04490797" y="2053.9817282076788" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TIME-WAIT</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 215.35785386 2096.2019459676785 L 545.84469292 2096.2019459676785 L 561.67727458 2112.0345276276785 L 561.67727458 2189.4382601876787 L 215.35785386 2189.4382601876787 L 215.35785386 2096.2019459676785 M 545.84469292 2096.2019459676785 L 545.84469292 2112.0345276276785 L 561.67727458 2112.0345276276785" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="239.98631422" y="2120.8304063276787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If you see a lot of connections in this state</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="239.98631422" y="2138.4221637276787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check both applications why</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="239.98631422" y="2156.0139211276787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">the connetions are not persistent.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="239.98631422" y="2173.6056785276787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">E.g.: HTTP/1.1 Connection: Keep-Alive</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="420.76911945333336" y="2231.658477947679" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Wait for 240 seconds</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 397.31344292 2238.6951809076786 L 467.68047251999997 2238.6951809076786 L 467.68047251999997 2261.5644655276787 L 411.7973231793333 2261.5644655276787" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(397.31344292,2261.5644655276787) translate(-397.31344292,-2261.5644655276787)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 411.97324075333336 2254.2345666110123 L 397.31344292 2261.5644655276787 L 411.97324075333336 2268.8943644443452 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 612.320382099 2287.952101627679 L 927.2598031439609 2287.952101627679 L 943.0923848039608 2303.784683287679 L 943.0923848039608 2337.912692643679 L 612.320382099 2337.912692643679 L 612.320382099 2287.952101627679 M 927.2598031439609 2287.952101627679 L 927.2598031439609 2303.784683287679 L 943.0923848039608 2303.784683287679" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.600000000000001pt" font-style="normal" font-weight="normal" text-decoration="normal" x="645.7447211589999" y="2309.414045655679" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Author: Mircea Vutcovici</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.600000000000001pt" font-style="normal" font-weight="normal" text-decoration="normal" x="645.7447211589999" y="2323.4874515756787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Generated using: https:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.600000000000001pt" font-style="normal" font-weight="normal" text-decoration="normal" x="778.7748877849765" y="2323.4874515756787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">//</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.600000000000001pt" font-style="normal" font-weight="normal" text-decoration="normal" x="785.8856665935702" y="2323.4874515756787" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sequencediagram.org</text></g></g></g></svg>